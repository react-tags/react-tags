!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDND")):"function"==typeof define&&define.amd?define(["React","ReactDND"],t):"object"==typeof exports?exports.ReactTags=t(require("React"),require("ReactDND")):e.ReactTags=t(e.React,e.ReactDND)}(this,function(e,t){return function(e){function t(n){if(s[n])return s[n].exports;var a=s[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t,s){var n=s(1),a=s(3),i=s(2);const r={ENTER:13,TAB:9,BACKSPACE:8,UP_ARROW:38,DOWN_ARROW:40,ESCAPE:27};var o=n.createClass({displayName:"ReactTags",getDefaultProps:function(){return{tags:[],suggestions:[]}},componentDidMount:function(){this.refs.input.getDOMNode().focus()},getInitialState:function(){return{tags:this.props.tags,suggestions:this.props.suggestions,query:"",selectedIndex:-1,selectionMode:!1}},handleDelete:function(e,t){var s=this.state.tags;s.splice(e,1),this.setState({tags:s,query:""})},handleChange:function(e){var t=e.target.value.trim(),s=this.props.suggestions.filter(function(e){return 0===e.toLowerCase().search(t.toLowerCase())});this.setState({query:t,suggestions:s})},handleKeyDown:function(e){var t=this.state.tags,s=this.state.query,n=this.state.selectedIndex,a=this.state.suggestions;if(e.keyCode===r.ESCAPE&&(e.preventDefault(),this.setState({selectedIndex:-1,selectionMode:!1,suggestions:[]})),e.keyCode!==r.ENTER&&e.keyCode!==r.TAB||""==s||(e.preventDefault(),this.state.selectionMode&&(s=this.state.suggestions[this.state.selectedIndex]),this.addTag(s)),e.keyCode===r.BACKSPACE&&""==s&&this.handleDelete(t.length-1),e.keyCode===r.UP_ARROW){e.preventDefault();var n=this.state.selectedIndex;this.setState(0>=n?{selectedIndex:this.state.suggestions.length-1,selectionMode:!0}:{selectedIndex:n-1,selectionMode:!0})}e.keyCode===r.DOWN_ARROW&&(e.preventDefault(),this.setState({selectedIndex:(this.state.selectedIndex+1)%a.length,selectionMode:!0}))},addTag:function(e){var t=this.state.tags,s=this.refs.input.getDOMNode();t.push({id:t.length+1,text:e}),this.setState({tags:t,query:"",selectionMode:!1,selectedIndex:-1}),s.value="",s.focus()},handleSuggestionClick:function(e,t){this.addTag(this.state.suggestions[e])},handleSuggestionHover:function(e,t){this.setState({selectedIndex:e,selectionMode:!0})},moveTag:function(e,t){var s=this.state.tags,n=s.filter(function(t){return t.id===e})[0],a=s.filter(function(e){return e.id===t})[0],i=s.indexOf(n),r=s.indexOf(a);s.splice(i,1),s.splice(r,0,n),this.setState({tags:s})},render:function(){var e=this.state.tags.map(function(e,t){return n.createElement(a,{tag:e,onDelete:this.handleDelete.bind(this,t),moveTag:this.moveTag})}.bind(this)),t=this.state.query.trim(),s=this.state.selectedIndex,r=this.state.suggestions;return n.createElement("div",{className:"tags"},n.createElement("div",{className:"selected-tags"},e),n.createElement("div",{className:"tagInput"},n.createElement("input",{ref:"input",type:"text",placeholder:"Add new country",onChange:this.handleChange,onKeyDown:this.handleKeyDown}),n.createElement(i,{query:t,suggestions:r,selectedIndex:s,handleClick:this.handleSuggestionClick,handleHover:this.handleSuggestionHover})),n.createElement("pre",null," ",n.createElement("code",null," ",JSON.stringify(this.state.tags,null,2)," ")," "))}});e.exports=o},function(t,s,n){t.exports=e},function(e,t,s){var n=s(1);const a=2;var i=n.createClass({displayName:"Suggestions",propTypes:{query:n.PropTypes.string.isRequired,selectedIndex:n.PropTypes.number.isRequired,suggestions:n.PropTypes.array.isRequired,handleClick:n.PropTypes.func.isRequired,handleHover:n.PropTypes.func.isRequired},markIt:function(e,t){var s=t.trim().replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),n=RegExp(s,"gi");return{__html:e.replace(n,"<mark>$&</mark>")}},render:function(){var e=this.props,t=this.props.suggestions.map(function(t,s){return n.createElement("li",{key:s,onClick:e.handleClick.bind(this,s),onMouseOver:e.handleHover.bind(this,s),className:s==e.selectedIndex?"active":""},n.createElement("span",{dangerouslySetInnerHTML:this.markIt(t,e.query)}))}.bind(this));return 0===t.length||e.query.length<a?n.createElement("div",{className:"suggestions"}," "):n.createElement("div",{className:"suggestions"},n.createElement("ul",null,t," "))}});e.exports=i},function(e,t,s){var n=s(4),a=s(1);const i={TAG:"tag"};var r={tag:{border:"1px solid #ddd",background:"#eee",fontSize:12,display:"inline-block",padding:5,margin:"0 5px",cursor:"move",borderRadius:2},remove:{color:"#aaa",marginLeft:5,cursor:"pointer"}},o=a.createClass({displayName:"Tag",mixins:[n.DragDropMixin],propTypes:{onDelete:a.PropTypes.func.isRequired,tag:a.PropTypes.object.isRequired,moveCard:a.PropTypes.func.isRequired},statics:{configureDragDrop:function(e){e(i.TAG,{dragSource:{beginDrag:function(e){return{item:{id:e.props.tag.id}}}},dropTarget:{over:function(e,t){e.props.moveTag(t.id,e.props.tag.id)}}})}},render:function(){return a.createElement("span",a.__spread({className:"ReactTags__tag"},this.dragSourceFor(i.TAG),this.dropTargetFor(i.TAG),{style:r.tag}),this.props.tag.text,a.createElement("a",{className:"ReactTags__remove",style:r.remove,onClick:this.props.onDelete},"x"))}});e.exports=o},function(e,s,n){e.exports=t}])});